{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-04-16 13:39:42.956599",
 "css": ".boq-cost td{\n    padding:5px !important;\n    font-size:8pt;\n}",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Quotation",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div style=\\\"text-align:center;\\\">\\n    <h2><b>Master BOQ</b></h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n\\n\\n{% set address = frappe.get_list(\\\"Dynamic Link\\\",\\n    filters={\\n        \\\"link_name\\\": doc.party_name,\\n        \\\"parenttype\\\": \\\"Address\\\"\\n    },\\n    fields=[\\\"*\\\"],\\n    ignore_permissions=true\\n) %}\\n{% if address %}\\n{% set add_doc = frappe.get_doc(\\\"Address\\\", address[0].parent) %}\\n{% endif %}\\n\\n\\n{% set ns = namespace(sec_loop_count=0) %}\\n\\n\\n\\n\\n\\n<div style=\\\"width:100%;\\\">\\n    \\n    <table style=\\\"width:100%; font-size:8pt;\\\">\\n        <tr>\\n            <td style=\\\"width:15%; padding:1px !important; border:1px solid black;\\\"><b>Quotation To</b></td>\\n            <td style=\\\"width:35%; padding:1px !important; border:1px solid black;\\\">{{doc.quotation_to or ''}}</td>\\n            <td style=\\\"width:15%; padding:1px !important; border:1px solid black;\\\"><b>Project</b></td>\\n            <td style=\\\"width:35%; padding:1px !important; border:1px solid black;\\\">{{doc.custom_project or ''}}</td>\\n        </tr>\\n        <tr>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\"><b>{{doc.quotation_to}}</b></td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\">{{doc.party_name or ''}}</td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\"><b>Reference</b></td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\">{{doc.custom_quotation_reference or ''}}</td>\\n        </tr>\\n        <tr>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\"><b>Order Type</b></td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\">{{doc.order_type or ''}}</td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\"><b>Document Type</b></td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\">{{doc.custom_document_type or ''}}</td>\\n        </tr>\\n        <tr>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\"><b>Date</b></td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\">{{doc.transaction_date or ''}}</td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\"><b>Valid Till</b></td>\\n            <td style=\\\"padding:1px !important; border:1px solid black;\\\">{{doc.valid_till or ''}}</td>\\n        </tr>\\n    </table>\\n    \\n    \\n    <br>\\n    \\n    \\n    \\n    {% if doc.custom_costing_rate_from_product_bundle == 1 %}\\n    <table style=\\\"width:100%; font-size:8pt;\\\">\\n        <thead>\\n            <tr>\\n                <th style=\\\"font-size:10pt; width:5%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"></th>\\n                <th colspan=\\\"2\\\" style=\\\"font-size:10pt; width:55%; border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>ITEM</b></th>\\n\\n                <th style=\\\"font-size:10pt; width:8%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>QTY</b></th>\\n                <th style=\\\"font-size:10pt; width:8%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>UNIT</b></th>\\n                <th style=\\\"font-size:8pt; width:10%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>COSTING RATE</b></th>\\n                <th style=\\\"font-size:10pt; width:14%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>AMOUNT</b></th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n            {% for row in doc.items %}\\n                {% set ns.sec_loop_count = 0 %}\\n                {% set pb_list = frappe.get_all('Product Bundle',\\n                                    filters={\\n                                        'new_item_code' : row.item_code ,\\n                                    },\\n                                    fields=['name', 'description'],\\n                                    )\\n                %}\\n                {% if pb_list %}\\n                    \\n                    <tr>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{row.idx}}</b></td>\\n                        <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"><b>{{pb_list[0].description}}</b></td>\\n                        \\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b></b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b></b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b></b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    </tr>\\n                    <tr>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b></b></td>\\n                        <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"><b>{{row.idx}}.1- {{row.item_code}}</b></td>\\n                        \\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{ \\\"{:,.0f}\\\".format(row.qty | int if row.qty == row.qty|int else row.qty|int + 1) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b>{{row.uom }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b>{{ \\\"{:,.2f}\\\".format(row.custom_total_landed_per_unit_cost + row.custom_item_cogs) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    </tr>\\n                \\n                {% else %}\\n                    <tr>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{row.idx}}</b></td>\\n                        <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"><b>{{row.item_code}}</b></td>\\n                        \\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{ \\\"{:,.0f}\\\".format(row.qty | int if row.qty == row.qty|int else row.qty|int + 1) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b>{{row.uom }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b>{{ \\\"{:,.2f}\\\".format(row.custom_total_landed_per_unit_cost + row.custom_item_cogs) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    </tr>\\n                {% endif %}\\n                {% for row2 in doc.packed_items %}\\n                    {% if row.item_code == row2.parent_item %}\\n                        {% set ns.sec_loop_count = ns.sec_loop_count + 1 %}\\n                        <tr>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b>{{row.idx}}.1.{{ns.sec_loop_count}}</b></td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\">{{row2.item_code}}</td>\\n    \\n                            <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\">{{ \\\"{:,.0f}\\\".format(row2.qty | int if row2.qty == row2.qty|int else row2.qty|int + 1) }}</td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\">{{row2.uom}}</td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\">{{ \\\"{:,.2f}\\\".format(row2.custom_costing_rate) }}</td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                        </tr>\\n                    {% endif %}\\n                {% endfor %}\\n                <tr>\\n                    <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"></td>\\n                    \\n                    <td colspan=\\\"3\\\" style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>Total</b></td>\\n                    <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b>{{ \\\"{:,.2f}\\\".format(row.custom_total_costs) }}</b></td>\\n                </tr>\\n            {% endfor %} \\n        </tbody>\\n    </table>\\n    \\n    \\n    {% else %}\\n    <table style=\\\"width:100%; font-size:8pt;\\\">\\n        <thead>\\n            <tr>\\n                <th style=\\\"font-size:10pt; width:5%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"></th>\\n                <th colspan=\\\"2\\\" style=\\\"font-size:10pt; width:55%; border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>ITEM</b></th>\\n\\n                <th style=\\\"font-size:10pt; width:8%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>QTY</b></th>\\n                <th style=\\\"font-size:10pt; width:8%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>UNIT</b></th>\\n                <th style=\\\"font-size:8pt; width:10%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>COSTING RATE</b></th>\\n                <th style=\\\"font-size:10pt; width:14%; border:1px solid black; padding:5px !important; background-color:#F5F5F5;\\\"><b>AMOUNT</b></th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n            {% for row in doc.items %}\\n                {% set ns.sec_loop_count = 0 %}\\n                {% set pb_list = frappe.get_all('Product Bundle',\\n                                    filters={\\n                                        'new_item_code' : row.item_code ,\\n                                    },\\n                                    fields=['name', 'description'],\\n                                    )\\n                %}\\n                {% if pb_list %}\\n                    \\n                    <tr>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{row.idx}}</b></td>\\n                        <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"><b>{{ pb_list[0].description }}</b></td>\\n                        \\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b></b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b></b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b></b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    </tr>\\n                    <tr>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b></b></td>\\n                        <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"><b>{{row.idx}}.1- {{row.item_code}}</b></td>\\n                        \\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{ \\\"{:,.0f}\\\".format(row.qty | int if row.qty == row.qty|int else row.qty|int + 1) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b>{{row.uom }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b>{{ \\\"{:,.2f}\\\".format(row.custom_total_landed_per_unit_cost + row.custom_item_cogs) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    </tr>\\n                \\n                {% else %}\\n                    <tr>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{row.idx}}</b></td>\\n                        <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"><b>{{row.item_code}}</b></td>\\n                        \\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>{{ \\\"{:,.0f}\\\".format(row.qty | int if row.qty == row.qty|int else row.qty|int + 1) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b>{{row.uom }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b>{{ \\\"{:,.2f}\\\".format(row.custom_total_landed_per_unit_cost + row.custom_item_cogs) }}</b></td>\\n                        <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    </tr>\\n                {% endif %}\\n                {% for row2 in doc.packed_items %}\\n                    {% if row.item_code == row2.parent_item %}\\n                        {% set ns.sec_loop_count = ns.sec_loop_count + 1 %}\\n                        <tr>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\"><b>{{row.idx}}.1.{{ns.sec_loop_count}}</b></td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\">{{row2.item_code}}</td>\\n\\n                            <td style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\">{{ \\\"{:,.0f}\\\".format(row2.qty | int if row2.qty == row2.qty|int else row2.qty|int + 1) }}</td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\">{{row2.uom}}</td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\">-</td>\\n                            <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                        </tr>\\n                    {% endif %}\\n                {% endfor %}\\n                <tr>\\n                    <td style=\\\"border:1px solid black; padding:1px !important;\\\"></td>\\n                    <td colspan=\\\"2\\\" style=\\\"border-top:1px solid black; border-bottom:1px solid black; border-left:1px solid black; padding:1px !important;\\\"></td>\\n                    \\n                    <td colspan=\\\"3\\\" style=\\\"border:1px solid black; padding:1px !important; text-align:center;\\\"><b>Total</b></td>\\n                    <td style=\\\"border:1px solid black; padding:1px !important; text-align:right;\\\"><b>{{ \\\"{:,.2f}\\\".format(row.custom_total_costs) }}</b></td>\\n                </tr>\\n            {% endfor %} \\n        </tbody>\\n    </table>\\n    {% endif %}\\n    \\n    \\n    \\n</div>\\n<div style=\\\"width:100%; font-weight:bold; text-align:center;\\\">\\n    BOQ Costing\\n</div>\\n<div style=\\\"width:100%;\\\">\\n    <table style=\\\"width:100%;font-size:8pt;\\\" border=\\\"1\\\" class=\\\"boq-cost\\\">\\n        <thead>\\n            <tr style=\\\"background-color:whitesmoke;\\\">\\n                <td style=\\\"width:59%;\\\">\\n                    <b>Name</b>\\n                </td>\\n                <td style=\\\"width:14%;text-align:center;\\\">\\n                    <b>Desc</b>\\n                </td>\\n                <td style=\\\"width:12%;text-align:center;\\\">\\n                    <b>Percent</b>\\n                </td>\\n                <td style=\\\"width:15%;text-align:center;\\\">\\n                    <b>Amount</b>\\n                </td>\\n            </tr>\\n        </thead>\\n        {% for cos in doc.custom_boq_costing_list %}\\n        <tr>\\n            <td>\\n                {{cos.name1 or '' }}\\n            </td>\\n            <td>\\n                {{cos.description or '' }}\\n            </td>\\n            <td style=\\\"text-align:center;\\\">\\n                {{ \\\"%.2f\\\"|format(cos.percent or 0) }}%\\n            </td>\\n            <td style=\\\"text-align:right;\\\">\\n                {{ \\\"{:,.2f}\\\".format(cos.amount or 0) }}\\n            </td>\\n        </tr>\\n        {% endfor %}\\n    </table>\\n    <table style=\\\"width:100%;font-size:8pt;page-break-inside:avoid;margin-top:10px;\\\" border=\\\"1\\\" class=\\\"boq-cost\\\">\\n        <tr style=\\\"background-color:whitesmoke;\\\">\\n            <td style=\\\"width:73%;\\\">\\n                Selling Amount Total \\n            </td>\\n            <td style=\\\"width:12%;text-align:center\\\">\\n                100%\\n            </td>\\n            <td style=\\\"width:15%;text-align:right\\\">\\n                {{ \\\"{:,.2f}\\\".format(doc.grand_total or 0) }}\\n            </td>\\n        </tr>\\n        {% if doc.custom_boq_costing_list %}\\n            {% set per_sum = (doc.custom_boq_costing_list | map(attribute='percent') | sum) %}\\n        {% else %}\\n            {% set per_sum = 0 %}\\n        {% endif %}\\n        \\n        <tr style=\\\"background-color:whitesmoke;\\\">\\n            <td>\\n                BOQ Costing Total\\n            </td>\\n            <td style=\\\"text-align:center\\\">\\n                {{ \\\"%.2f\\\"|format(per_sum) }}%\\n            </td>\\n            <td style=\\\"text-align:right\\\">\\n                {{ \\\"{:,.2f}\\\".format(doc.custom_boq_costing_total or 0) }}\\n            </td>\\n        </tr>\\n        <tr style=\\\"background-color:lightgrey;\\\">\\n            <td>\\n                Profit / Loss\\n            </td>\\n            <td style=\\\"text-align:center\\\">\\n                {{ \\\"%.2f\\\"|format(100 - per_sum) }}%\\n            </td>\\n            <td style=\\\"text-align:right\\\">\\n                {{ \\\"{:,.2f}\\\".format((doc.grand_total or 0) - (doc.custom_boq_costing_total or 0)) }}\\n            </td>\\n        </tr>\\n    </table>\\n</div>\\n\\n\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-05-15 15:14:05.479563",
 "modified_by": "Administrator",
 "module": "Quotation Profitability",
 "name": "Master BOQ",
 "owner": "ahsan.tareen@sowaan.com",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}